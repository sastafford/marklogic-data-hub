<!doctype html> <!--[if lt IE 7 ]><html itemscope itemtype="http://schema.org/Organization" id="ie6" class="ie ie-old" lang="en-US"><![endif]--><!--[if IE 7 ]><html itemscope itemtype="http://schema.org/Organization" id="ie7" class="ie ie-old" lang="en-US"><![endif]--><!--[if IE 8 ]><html itemscope itemtype="http://schema.org/Organization" id="ie8" class="ie ie-old" lang="en-US"><![endif]--><!--[if IE 9 ]><html itemscope itemtype="http://schema.org/Organization" id="ie9" class="ie" lang="en-US"><![endif]--><!--[if gt IE 9]><!--><html itemscope itemtype="http://schema.org/Organization" lang="en-US"><!--<![endif]--><head><meta charset="utf-8"><title>How Does it work? - MarkLogic Data Hub Framework</title><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><meta content="yes" name="apple-mobile-web-app-capable"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link rel="shortcut icon" sizes="16x16 24x24 32x32 48x48 64x64 96x96" href="/marklogic-data-hub/favicon.ico"><link rel="apple-touch-icon" sizes="57x57" href="/marklogic-data-hub/img/favicons/favicon-57.png"><link rel="apple-touch-icon-precomposed" sizes="57x57" href="/marklogic-data-hub/img/favicons/favicon-57.png"><link rel="apple-touch-icon" sizes="60x60" href="/marklogic-data-hub/img/favicons/favicon-60.png"><link rel="apple-touch-icon" sizes="72x72" href="/marklogic-data-hub/img/favicons/favicon-72.png"><link rel="apple-touch-icon" sizes="76x76" href="/marklogic-data-hub/img/favicons/favicon-76.png"><link rel="apple-touch-icon" sizes="96x96" href="/marklogic-data-hub/img/favicons/favicon-96.png"><link rel="apple-touch-icon" sizes="114x114" href="/marklogic-data-hub/img/favicons/favicon-114.png"><link rel="apple-touch-icon" sizes="120x120" href="/marklogic-data-hub/img/favicons/favicon-120.png"><link rel="apple-touch-icon" sizes="144x144" href="/marklogic-data-hub/img/favicons/favicon-144.png"><link rel="apple-touch-icon" sizes="152x152" href="/marklogic-data-hub/img/favicons/favicon-152.png"><link rel="apple-touch-icon" sizes="180x180" href="/marklogic-data-hub/img/favicons/favicon-180.png"><link rel="apple-touch-icon" sizes="192x192" href="/marklogic-data-hub/img/favicons/favicon-192.png"><meta name="application-name" content="MarkLogic Data Hub Framework - A data hub framework for MarkLogic"><meta name="msapplication-TileImage" content="/marklogic-data-hub/img/favicons/favicon-144.png"><meta name="msapplication-TileColor" content="#ffffff"></head><body class=""><nav class="navbar navbar-inverse navbar-fixed-top"><div class="container-fluid"><div class="navbar-header"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="/"> <span class="logo"> <img src="/marklogic-data-hub/images/logo-marklogic.svg" width="150px" height="36px" alt="MarkLogic" title="MarkLogic" scale="0"> </span> MarkLogic Data Hub Framework </a></div><div id="navbar" class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right"><li> <a href="/marklogic-data-hub/">Getting Started</a></li><li> <a href="/marklogic-data-hub/what">What?</a></li><li> <a href="/marklogic-data-hub/how">How?</a></li><li> <a href="https://github.com/marklogic/marklogic-data-hub">Fork on GitHub</a></li></ul></div></div> </nav><div class="title-group"><h1 class="special"> <span> How Does it work? </span></h1><p class="lead"></p></div><article><div class="container"><div class="row"><div class="col-md-10 col-md-offset-1"><p>The MarkLogic Data Hub Framework is organized into Entities, Flow, and Plugins.</p><p><img src="//raw.githubusercontent.com/marklogic/marklogic-data-hub/design/images/hub-internals-gray.png" alt="Hub Internals"/></p><h2 id="envelope-pattern">Envelope Pattern</h2><p>The MarkLogic Data Hub Framework uses the Envelope data pattern to encapsulate data. Simply put, the envelope pattern wraps your data in either XML or JSON like so:</p><div class="row"><div class="col-md-6"><div class="highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;envelope&gt;</span>
  <span class="nt">&lt;headers/&gt;</span>
  <span class="nt">&lt;triples/&gt;</span>
  <span class="nt">&lt;content&gt;</span>
    your data goes here
  <span class="nt">&lt;/content&gt;</span>
<span class="nt">&lt;/envelope&gt;</span>
</code></pre></div></div><div class="col-md-6"><div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"headers"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nt">"triples"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nt">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"your data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"goes here"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div></div><p>The advantage to wrapping data is that you can retain the original data untouched (if you so desire) while allowing you to add additional data.</p><p>As an example. Let’s say you have 2 data sources that have gender information. Perhaps the field names and the formats differ.</p><div class="row"><div class="col-md-6"><p><strong>/source-1.json</strong></p><div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"gender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div><div class="col-md-6"><p><strong>/source-2.json</strong></p><div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"gndr"</span><span class="p">:</span><span class="w"> </span><span class="s2">"female"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div></div><p>With the envelope you can normalize the fields into a preferred format:</p><div class="row"><div class="col-md-6"><p><strong>/harmonized-1.json</strong></p><div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"headers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="nt">"normalizedGender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"female"</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"triples"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nt">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"gender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div><div class="col-md-6"><p><strong>/harmonized-2.json</strong></p><div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"headers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="nt">"normalizedGender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"female"</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"triples"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nt">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"gndr"</span><span class="p">:</span><span class="w"> </span><span class="s2">"female"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div></div><p>Now searching your data become much easier.</p><h2 id="entities">Entities</h2><p>The MarkLogic Data Hub Framework groups your data into Entities. These Entities are logical groupings of data that serve a common business function. An example may be Employees or Customers or SalesLeads.</p><h2 id="ingest">Ingest</h2><p>During the Ingest phase data is loaded into MarkLogic’s staging area. This data can be fed through Flows to create Enveloped versions of the data.</p><h2 id="harmonize">Harmonize</h2><p>During the Harmonize phase data is processed in bulk. The data is moved from the Staging area into the Final area and processed into Envelopes via Flows.</p><h2 id="flows">Flows</h2><p>With each Business Entity you can define multiple Input and Harmonize Flows. A Flow is a grouping of plugins that work together to create the envelope that holds your data. There is one plugin for each piece of the envelope (headers, triples, and content).</p><ul><li><strong>Content Plugin.</strong> The content plugin tells the system which data to store in the content section of the envelope.</li><li><strong>Headers Plugin.</strong> The headers plugin returns a list of headers to store in the headers section of the envelope.</li><li><strong>Triples Plugin.</strong> The triples plugin returns a list of semantic triples to store in the triples section of the envelope.</li></ul><p>Harmonize Flows require two additional plugins:</p><ul><li><strong>Collector plugin.</strong> The collector plugin returns a list of strings that will be batch processed by the harmonize flow. These strings can be anything from document URIs in the database to IDs. Collectors are only used for Harmonize Flows. Harmonize Flows run as batches and need a list of things to operate on. Input Flows run per document and do not need Collectors.</li><li><strong>Writer plugin.</strong> The writer plugin is responsible for saving the final envelope to disk. *The writer plugin is not present for the Input flow because the caller is responsible for writing. Typically the caller is <a href="https://docs.marklogic.com/guide/mlcp" target="_blank">MarkLogic Content Pump</a> or the <a href="https://docs.marklogic.com/REST/client" target="_blank">MarkLogic REST API</a></li></ul></div></div></div> </article><footer class="site-footer"><div class="container"><div class="row"><div class="col-md-12"><p class="text-muted">Copyright © 2016 MarkLogic Corporation. All Rights Reserved. MARKLOGIC® is a registered trademark of MarkLogic Corporation.</p></div></div></div> </footer><link rel="stylesheet" href="/marklogic-data-hub/css/style.css"> <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script><script src="/marklogic-data-hub/js/respond.min.js"></script><![endif]--><script src="/marklogic-data-hub/assets/bundle.js" id="1"></script><script>!function(e,t,a,n,c,s,o){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,s=t.createElement(a),o=t.getElementsByTagName(a)[0],s.async=1,s.src=n,o.parentNode.insertBefore(s,o)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-79716597-1","auto"),ga("send","pageview")</script></body></html>